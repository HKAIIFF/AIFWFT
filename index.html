<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AIF.WTF | SPATIAL COMPUTING DEPIN</title>
    
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    
    <!-- GSAP Suite -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/gsap.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/ScrollTrigger.min.js"></script>
    
    <!-- FontAwesome -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">

    <!-- Fonts: Oswald + Space Mono -->
    <link href="https://fonts.googleapis.com/css2?family=Oswald:wght@400;500;700&family=Space+Mono:ital,wght@0,400;0,700;1,400&family=Noto+Sans+TC:wght@400;700&display=swap" rel="stylesheet">

    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        void: '#050505',
                        concrete: '#1F1F1F',
                        signal: '#FF3300', // Signature Orange
                        steel: '#EAEAEA',
                        dim: '#888888',
                        paper: '#F3F3F3',
                    },
                    fontFamily: {
                        heavy: ['"Oswald"', 'sans-serif'],
                        mono: ['"Space Mono"', 'monospace'],
                        sans: ['"Oswald"', '"Noto Sans TC"', 'sans-serif'],
                    },
                    backgroundImage: {
                        'grid-pattern': "linear-gradient(to right, rgba(255,255,255,0.05) 1px, transparent 1px), linear-gradient(to bottom, rgba(255,255,255,0.05) 1px, transparent 1px)",
                    }
                }
            }
        }
    </script>

    <style>
        /* CORE STYLES */
        html { scroll-behavior: smooth; }
        body { background-color: #EAEAEA; color: #050505; overflow-x: hidden; }
        ::selection { background: #FF3300; color: #000; }

        /* TYPOGRAPHY */
        .mega-text {
            font-size: clamp(3.5rem, 11vw, 14rem);
            line-height: 0.85;
            text-transform: uppercase;
            letter-spacing: -0.02em;
            font-weight: 700;
        }

        .section-title {
            font-size: clamp(2rem, 5vw, 5rem);
            line-height: 1;
            text-transform: uppercase;
            font-weight: 700;
            margin-bottom: 2rem;
            letter-spacing: -0.02em;
        }

        .outline-text {
            color: transparent;
            -webkit-text-stroke: 1.5px #050505;
            text-stroke: 1.5px #050505;
            transition: all 0.3s ease;
        }
        
        .hero-title .outline-text {
            -webkit-text-stroke: 1.5px #FFFFFF;
        }

        /* BUTTONS */
        .brutal-btn {
            background: #050505;
            color: #EAEAEA;
            border: 2px solid #050505;
            padding: 1rem 2rem;
            font-family: 'Space Mono', monospace;
            text-transform: uppercase;
            font-weight: bold;
            position: relative;
            overflow: hidden;
            transition: all 0.3s;
            display: inline-flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
        }

        .brutal-btn::before {
            content: '';
            position: absolute;
            top: 0; left: 0; width: 100%; height: 100%;
            background: #FF3300;
            transform: translateX(-101%);
            transition: transform 0.3s cubic-bezier(0.77, 0, 0.175, 1);
            z-index: 0;
        }

        .brutal-btn:hover::before { transform: translateX(0); }
        .brutal-btn span, .brutal-btn i { position: relative; z-index: 1; }
        .brutal-btn:hover { color: #000; border-color: #FF3300; }

        /* CARDS */
        .info-card { 
            transition: all 0.3s ease; 
            border: 2px solid #000; 
            background: #fff;
            height: 100%; 
            position: relative;
        }
        .info-card:hover { 
            transform: translate(-5px, -5px); 
            box-shadow: 10px 10px 0px 0px rgba(0,0,0,1); 
        }
        .info-card.dark {
            background: #050505;
            color: white;
        }
        .info-card.dark:hover { 
            box-shadow: 10px 10px 0px 0px #FF3300; 
            border-color: #FF3300;
        }

        /* DISCLAIMER MODAL */
        #disclaimer-modal {
            position: fixed; inset: 0; background: rgba(5,5,5,0.95); z-index: 10000;
            display: flex; justify-content: center; align-items: center; padding: 1rem;
            backdrop-filter: blur(5px);
        }

        /* Custom Checkbox */
        .custom-checkbox {
            appearance: none; background-color: #fff; margin: 0; font: inherit; color: currentColor;
            width: 1.15em; height: 1.15em; border: 2px solid currentColor; display: grid; place-content: center;
            cursor: pointer; flex-shrink: 0;
        }
        .custom-checkbox::before {
            content: ""; width: 0.65em; height: 0.65em; transform: scale(0);
            transition: 120ms transform ease-in-out; box-shadow: inset 1em 1em #FF3300;
        }
        .custom-checkbox:checked::before { transform: scale(1); }

        /* CUSTOM SCROLLBAR */
        ::-webkit-scrollbar { width: 10px; }
        ::-webkit-scrollbar-track { background: #EAEAEA; border-left: 2px solid #000; }
        ::-webkit-scrollbar-thumb { background: #000; border: 2px solid #EAEAEA; }
        ::-webkit-scrollbar-thumb:hover { background: #FF3300; }

        /* HEATMAP CONTAINER (Restored to Digital/Grid Style) */
        #heatmap-container {
            position: relative;
            background-color: #050505;
            overflow: hidden;
            border-top: 2px solid #000;
            border-bottom: 2px solid #000;
            /* Grid Pattern Background */
            background-size: 40px 40px;
            background-image: linear-gradient(to right, rgba(255,255,255,0.05) 1px, transparent 1px), linear-gradient(to bottom, rgba(255,255,255,0.05) 1px, transparent 1px);
        }
        
        #globalCanvas {
            position: relative;
            z-index: 1;
            width: 100%;
            height: 100%;
            display: block;
        }

        /* FLIP BOARD TABLE STYLES (Kept from Previous Version) */
        .fids-board {
            background: #111;
            padding: 1rem;
            border-top: 4px solid #000;
            border-bottom: 4px solid #000;
            overflow-x: auto;
        }
        .fids-table {
            width: 100%;
            min-width: 800px;
            border-collapse: separate;
            border-spacing: 0 4px;
        }
        .fids-header th {
            text-align: left;
            font-family: 'Space Mono', monospace;
            font-size: 12px;
            color: #888;
            padding: 0 10px 10px 10px;
            letter-spacing: 0.1em;
        }
        .fids-row {
            background: #222;
            color: #ddd;
            font-family: 'Space Mono', monospace;
            font-size: 14px;
            height: 40px;
        }
        .fids-cell {
            padding: 0 10px;
            border-right: 2px solid #111;
            white-space: nowrap;
            overflow: hidden;
            position: relative;
        }
        /* Flip Animation Simulation */
        .flip-char {
            display: inline-block;
            position: relative;
            animation: flip-change 0.4s ease-in-out;
        }
        @keyframes flip-change {
            0% { transform: rotateX(0deg); opacity: 1; }
            50% { transform: rotateX(90deg); opacity: 0.5; }
            51% { opacity: 0; }
            52% { transform: rotateX(-90deg); opacity: 0; }
            100% { transform: rotateX(0deg); opacity: 1; }
        }
        
        .status-active { color: #00FF00; }
        .status-sync { color: #FFFF00; }
        .status-offline { color: #FF3300; }


        /* MOBILE MENU */
        #mobile-menu {
            position: fixed; top: 80px; left: 0; width: 100%; height: calc(100vh - 80px);
            background: #050505; transform: translateX(100%); transition: transform 0.3s ease-in-out;
            z-index: 49; overflow-y: auto;
        }
        #mobile-menu.active { transform: translateX(0); }

        /* LOADER */
        #loader {
            position: fixed; inset: 0; background: #FF3300; z-index: 9999;
            display: flex; justify-content: center; align-items: center; flex-direction: column;
        }

    </style>
</head>
<body class="grid-bg overflow-hidden" id="body-content">

    <!-- LOADER -->
    <div id="loader">
        <div class="font-heavy text-6xl md:text-9xl font-bold text-black tracking-tighter">AIF.WTF</div>
        <div class="font-mono text-black mt-4 text-xs md:text-base animate-pulse">
            INITIALIZING_DEPIN_PROTOCOL...
        </div>
    </div>

    <!-- DISCLAIMER MODAL -->
    <div id="disclaimer-modal">
        <div class="bg-white w-full max-w-lg p-6 md:p-10 border-4 border-signal shadow-[10px_10px_0px_0px_rgba(255,51,0,0.5)] max-h-[90vh] overflow-y-auto">
            <h2 class="font-heavy text-3xl md:text-4xl mb-6 text-black border-b-4 border-black pb-2">
                <span data-i18n="disc_title">IMPORTANT DISCLAIMER</span>
            </h2>
            
            <div class="font-mono text-sm md:text-base text-gray-800 mb-6 space-y-2">
                <p data-i18n="disc_p1">You are about to enter the AIF.WTF Node Service Area.</p>
                <p data-i18n="disc_p2">This service involves digital assets and infrastructure participation.</p>
            </div>

            <div class="space-y-4 mb-8 font-mono text-sm font-bold text-black">
                <p class="mb-4 text-gray-600" data-i18n="disc_confirm">Please confirm:</p>

                <label class="flex items-start gap-3 cursor-pointer hover:text-signal transition-colors">
                    <input type="checkbox" class="custom-checkbox mt-1 disclaimer-check" onchange="checkDisclaimer()">
                    <span data-i18n="disc_c1">I am not a resident of Mainland China</span>
                </label>

                <label class="flex items-start gap-3 cursor-pointer hover:text-signal transition-colors">
                    <input type="checkbox" class="custom-checkbox mt-1 disclaimer-check" onchange="checkDisclaimer()">
                    <span data-i18n="disc_c2">I am not a U.S. citizen or resident</span>
                </label>

                <label class="flex items-start gap-3 cursor-pointer hover:text-signal transition-colors">
                    <input type="checkbox" class="custom-checkbox mt-1 disclaimer-check" onchange="checkDisclaimer()">
                    <span data-i18n="disc_c3">I am participating with my own offshore assets</span>
                </label>

                <label class="flex items-start gap-3 cursor-pointer hover:text-signal transition-colors">
                    <input type="checkbox" class="custom-checkbox mt-1 disclaimer-check" onchange="checkDisclaimer()">
                    <span data-i18n="disc_c4">I acknowledge the risks of digital asset participation</span>
                </label>

                <label class="flex items-start gap-3 cursor-pointer hover:text-signal transition-colors">
                    <input type="checkbox" class="custom-checkbox mt-1 disclaimer-check" onchange="checkDisclaimer()">
                    <span data-i18n="disc_c5">I voluntarily assume all risks</span>
                </label>
            </div>

            <div class="border-t-2 border-black pt-6">
                <p class="font-mono text-xs text-gray-500 mb-4" data-i18n="disc_agree">
                    I have read and agree to the "User Agreement" and "Risk Disclosure Statement".
                </p>
                <button id="disclaimer-submit" disabled onclick="acceptDisclaimer()" class="w-full bg-gray-300 text-gray-500 border-2 border-gray-300 py-3 font-heavy text-xl uppercase tracking-widest transition-all duration-300 cursor-not-allowed">
                    <span data-i18n="disc_enter">ENTER SITE</span>
                </button>
            </div>
        </div>
    </div>

    <!-- NAVIGATION -->
    <nav class="fixed top-0 left-0 w-full z-50 border-b-2 border-black h-20 md:h-24 flex items-center bg-[#EAEAEA]/95 backdrop-blur-md">
        <div class="w-full max-w-[1920px] mx-auto flex justify-between items-stretch h-full">
            
            <!-- Logo -->
            <div class="flex flex-col justify-center px-4 md:px-8 border-r-2 border-black hover:bg-black hover:text-white transition-colors cursor-pointer group h-full" onclick="window.scrollTo({top:0,behavior:'smooth'})">
                <span class="font-heavy text-3xl md:text-4xl font-bold tracking-tighter leading-none mb-1">AIF.WTF</span>
                <div class="flex flex-col leading-none">
                    <span class="font-mono text-[10px] md:text-xs tracking-widest font-bold group-hover:text-signal">LBS EDGE INFRA</span>
                </div>
            </div>
            
            <!-- Desktop Menu -->
            <div class="hidden xl:flex items-stretch h-full">
                <a href="#vision" class="nav-link flex items-center px-6 border-r-2 border-black hover:bg-black hover:text-white transition-colors font-mono text-xs uppercase font-bold tracking-wider">
                    <span data-i18n="nav_vision">VISION</span>
                </a>
                <a href="#heatmap" class="nav-link flex items-center px-6 border-r-2 border-black hover:bg-black hover:text-white transition-colors font-mono text-xs uppercase font-bold tracking-wider text-signal">
                    <span data-i18n="nav_heatmap">LIVE GRID</span>
                </a>
                <a href="#architecture" class="nav-link flex items-center px-6 border-r-2 border-black hover:bg-black hover:text-white transition-colors font-mono text-xs uppercase font-bold tracking-wider">
                    <span data-i18n="nav_tech">TECH</span>
                </a>
                <a href="#nodes" class="nav-link flex items-center px-6 border-r-2 border-black hover:bg-black hover:text-white transition-colors font-mono text-xs uppercase font-bold tracking-wider">
                    <span data-i18n="nav_nodes">NODES</span>
                </a>
                <a href="#roadmap" class="nav-link flex items-center px-6 border-r-2 border-black hover:bg-black hover:text-white transition-colors font-mono text-xs uppercase font-bold tracking-wider">
                    <span data-i18n="nav_roadmap">ROADMAP</span>
                </a>
            </div>

            <!-- Controls -->
            <div class="flex h-full">
                <button onclick="toggleLanguage()" class="flex items-center px-6 border-l-2 border-black hover:bg-signal hover:text-white transition-colors font-mono text-xs font-bold uppercase h-full whitespace-nowrap">
                    <span class="lang-text">EN/中文</span>
                </button>
                <button onclick="toggleMenu()" class="xl:hidden flex items-center px-6 border-l-2 border-black hover:bg-black hover:text-white transition-colors h-full">
                    <i class="fas fa-bars text-xl"></i>
                </button>
            </div>
        </div>
    </nav>

    <!-- MOBILE MENU OVERLAY -->
    <div id="mobile-menu">
        <div class="flex flex-col p-8 gap-6">
            <a href="#vision" onclick="toggleMenu()" class="text-white font-heavy text-4xl hover:text-signal transition-colors"><span data-i18n="nav_vision">VISION</span></a>
            <a href="#heatmap" onclick="toggleMenu()" class="text-signal font-heavy text-4xl hover:text-white transition-colors"><span data-i18n="nav_heatmap">LIVE GRID</span></a>
            <a href="#architecture" onclick="toggleMenu()" class="text-white font-heavy text-4xl hover:text-signal transition-colors"><span data-i18n="nav_tech">TECHNOLOGY</span></a>
            <a href="#nodes" onclick="toggleMenu()" class="text-white font-heavy text-4xl hover:text-signal transition-colors"><span data-i18n="nav_nodes">JOIN NODE</span></a>
            <a href="#roadmap" onclick="toggleMenu()" class="text-white font-heavy text-4xl hover:text-signal transition-colors"><span data-i18n="nav_roadmap">ROADMAP</span></a>
        </div>
    </div>

    <!-- HERO SECTION -->
    <header id="vision" class="relative min-h-screen flex items-center pt-24 overflow-hidden bg-black text-white">
        <!-- Background Image with Overlay -->
        <div class="absolute inset-0 z-0">
             <div class="absolute inset-0 bg-black/60 z-10"></div>
             <!-- Mobile Optimized Background -->
             <img src="https://images.unsplash.com/photo-1550751827-4bd374c3f58b?q=80&w=2670&auto=format&fit=crop" class="w-full h-full object-cover opacity-60" alt="Background">
        </div>
        
        <div class="relative z-10 w-full max-w-[1920px] mx-auto px-4 md:px-8">
            <div class="max-w-7xl">
                <div class="font-mono text-signal mb-4 flex items-center gap-2 animate-pulse">
                    <div class="w-3 h-3 bg-signal"></div>
                    <span data-i18n="hero_status">/// SYSTEM STATUS: GRID ONLINE</span>
                </div>
                
                <h1 class="hero-title font-heavy mega-text mb-6 leading-[0.85]">
                    <span class="block" data-i18n="hero_title1">DROP CONTENT</span>
                    <span class="block outline-text" data-i18n="hero_title2">NOT HARDWARE</span>
                </h1>
                
                <p class="font-mono text-sm md:text-xl max-w-2xl text-gray-300 mb-10 leading-relaxed border-l-4 border-signal pl-6 bg-black/40 backdrop-blur-md p-4">
                    <span data-i18n="hero_desc">
                        The world's first decentralized physical infrastructure network (DePIN) optimized for AI-native interactive content. We transform idle computing power into "digital anchors" for the spatial web.
                    </span>
                </p>
                
                <div class="flex flex-col md:flex-row gap-4">
                    <a href="#nodes" class="brutal-btn bg-signal text-black hover:bg-white border-signal hover:border-white">
                        <span data-i18n="hero_cta_primary">INITIATE NODE ///</span>
                    </a>
                    <a href="#heatmap" class="brutal-btn bg-transparent text-white border-white hover:bg-white hover:text-black">
                        <span data-i18n="hero_cta_heatmap">VIEW LIVE GRID</span>
                    </a>
                </div>
            </div>
        </div>
        
        <!-- Stats Strip -->
        <div class="absolute bottom-0 w-full bg-white text-black py-4 border-t-2 border-black z-20 hidden md:block">
            <div class="max-w-[1920px] mx-auto px-8 flex justify-between font-mono text-xs md:text-sm font-bold uppercase">
                <div class="flex items-center gap-2"><div class="w-2 h-2 bg-green-500 rounded-full animate-pulse"></div> <span data-i18n="stat_nodes">ACTIVE NODES: 1,248</span></div>
                <div><span data-i18n="stat_latency">LATENCY: 18.4MS</span></div>
                <div><span data-i18n="stat_compute">COMPUTE: 450 PFLOPS</span></div>
                <div><span data-i18n="trust_audit">AUDIT: CERTIK</span></div>
            </div>
        </div>
    </header>

    <!-- LIVE HEATMAP SECTION (DIGITAL STYLE) -->
    <section id="heatmap" class="bg-black text-white relative">
        <div class="border-b-2 border-white bg-signal text-black px-4 py-2 font-mono font-bold text-xs flex justify-between items-center relative z-20">
            <span>/// LIVE_NET_V3.0.EXE</span>
            <span class="animate-pulse">● REC</span>
        </div>
        
        <!-- Map Container - Digital Grid Style -->
        <div id="heatmap-container" class="h-[700px] relative">
            <canvas id="globalCanvas"></canvas>
            
            <!-- Ticker Overlay -->
            <div class="absolute bottom-8 left-8 right-8 z-10 pointer-events-none">
                <div class="w-full md:w-96 space-y-2" id="liveTickerContainer">
                    <!-- JS Injected Tickers -->
                </div>
            </div>
        </div>

        <!-- FULL DATA BOARD (Airport/Station Style) -->
        <div class="fids-board relative z-20 shadow-[0_-10px_20px_rgba(0,0,0,0.5)]">
            <div class="max-w-[1920px] mx-auto px-4 md:px-8">
                <div class="flex justify-between items-end mb-4 border-b-2 border-dim pb-2">
                    <h3 class="text-signal font-heavy text-2xl tracking-wider">NODE STATUS BOARD</h3>
                    <div class="text-dim font-mono text-xs animate-pulse">LIVE UPDATE</div>
                </div>
                
                <table class="fids-table">
                    <thead class="fids-header">
                        <tr>
                            <th width="15%">NODE ID</th>
                            <th width="20%">ADDRESS</th>
                            <th width="10%">TIER</th>
                            <th width="20%">COORDINATES</th>
                            <th width="15%">UPTIME</th>
                            <th width="20%">STATUS</th>
                        </tr>
                    </thead>
                    <tbody id="fids-body">
                        <!-- JS Generated Rows -->
                    </tbody>
                </table>
            </div>
        </div>

    </section>

    <!-- ARCHITECTURE -->
    <section id="architecture" class="py-20 md:py-32 px-4 md:px-8 max-w-[1920px] mx-auto bg-white border-b-2 border-black">
        <div class="text-center mb-16">
            <span class="font-mono text-signal font-bold tracking-widest uppercase mb-4 block" data-i18n="tech_label">INFRASTRUCTURE</span>
            <h2 class="section-title outline-text text-black" data-i18n="tech_title">THE TRINITY ARCHITECTURE</h2>
        </div>

        <div class="grid grid-cols-1 md:grid-cols-3 gap-0 border-2 border-black">
            <!-- CLOUD -->
            <div class="group border-b md:border-b-0 md:border-r border-black p-10 hover:bg-black hover:text-white transition-all duration-300 h-full flex flex-col justify-between">
                <div>
                    <div class="font-heavy text-6xl text-gray-200 group-hover:text-gray-800 mb-6">01</div>
                    <div class="text-signal text-3xl mb-4"><i class="fas fa-cloud"></i></div>
                    <h3 class="font-heavy text-3xl mb-4">CLOUD LAYER</h3>
                    <p class="font-mono text-xs mb-4 text-gray-500 group-hover:text-gray-400" data-i18n="tech_cloud">Content generation hub. Long-term storage. Heavy AI Training.</p>
                </div>
            </div>

            <!-- FOG (Highlighted) -->
            <div class="group border-b md:border-b-0 md:border-r border-black p-10 bg-signal text-black h-full flex flex-col justify-between relative overflow-hidden">
                <div class="absolute -right-4 -bottom-4 text-9xl text-black opacity-10"><i class="fas fa-server"></i></div>
                <div>
                    <div class="font-heavy text-6xl text-black/20 mb-6">02</div>
                    <div class="text-black text-3xl mb-4"><i class="fas fa-project-diagram"></i></div>
                    <h3 class="font-heavy text-3xl mb-4">FOG LAYER</h3>
                    <p class="font-mono text-xs mb-4 font-bold" data-i18n="tech_fog">THE CORE. Distributed nodes handling real-time rendering < 20ms.</p>
                </div>
                <div class="font-mono text-xs border-t border-black pt-4 mt-4">
                    /// RTX 3060+ NODES REQUIRED
                </div>
            </div>

            <!-- EDGE -->
            <div class="group p-10 hover:bg-black hover:text-white transition-all duration-300 h-full flex flex-col justify-between">
                <div>
                    <div class="font-heavy text-6xl text-gray-200 group-hover:text-gray-800 mb-6">03</div>
                    <div class="text-signal text-3xl mb-4"><i class="fas fa-glasses"></i></div>
                    <h3 class="font-heavy text-3xl mb-4">EDGE LAYER</h3>
                    <p class="font-mono text-xs mb-4 text-gray-500 group-hover:text-gray-400" data-i18n="tech_edge">Lightweight display hardware. Sensors. Offloading compute to Fog.</p>
                </div>
            </div>
        </div>
    </section>

    <!-- NODE TIERS -->
    <section id="nodes" class="py-20 md:py-32 px-4 md:px-8 max-w-[1920px] mx-auto bg-concrete text-white">
        <h2 class="section-title text-center text-white mb-4" data-i18n="node_title">JOIN THE NETWORK</h2>
        <p class="text-center font-mono text-gray-400 mb-8 max-w-2xl mx-auto" data-i18n="node_subtitle">Stake AIF to become a node operator. Provide compute, earn rewards.</p>
        
        <div class="text-center mb-12">
             <div class="inline-block bg-signal text-black px-4 py-2 font-mono font-bold text-sm transform -rotate-2">
                 ⚠️ NOTICE: EQUIVALENT AIF STAKE REQUIRED (0.06 USD/AIF)
             </div>
        </div>

        <div class="grid grid-cols-1 md:grid-cols-2 xl:grid-cols-4 gap-6 max-w-[1920px] mx-auto">
            
            <!-- Tier S -->
            <div class="info-card dark p-6 flex flex-col h-full border-signal" onclick="openJoinModal('S')">
                <div class="absolute top-0 right-0 bg-signal text-black font-bold px-2 py-1 font-mono text-xs">SUPER NODE</div>
                <div class="cursor-pointer">
                    <h3 class="font-heavy text-4xl mb-1 text-white">TIER S</h3>
                    <p class="font-mono text-xs text-gray-400 mb-6" data-i18n="tier_s_loc">Times Square / Shibuya</p>
                    
                    <div class="border-t border-white/20 py-4 mb-2">
                        <div class="flex justify-between font-mono text-sm mb-2">
                            <span class="text-gray-500">STAKE VALUE</span>
                            <span class="text-white font-bold">$500,000</span>
                        </div>
                        <div class="flex justify-between font-mono text-sm">
                            <span class="text-gray-500">HARDWARE</span>
                            <span class="text-signal font-bold">Dual EPYC + H100</span>
                        </div>
                    </div>
                </div>
                <button class="brutal-btn w-full bg-white text-black border-white mt-auto hover:text-white pointer-events-none"><span>INITIALIZE</span></button>
            </div>

            <!-- Tier A -->
            <div class="info-card dark p-6 flex flex-col h-full bg-[#111]" onclick="openJoinModal('A')">
                <div class="cursor-pointer">
                    <h3 class="font-heavy text-4xl mb-1 text-white">TIER A</h3>
                    <p class="font-mono text-xs text-gray-400 mb-6" data-i18n="tier_a_loc">Commercial Districts</p>
                    
                    <div class="border-t border-white/20 py-4 mb-2">
                        <div class="flex justify-between font-mono text-sm mb-2">
                            <span class="text-gray-500">STAKE VALUE</span>
                            <span class="text-white font-bold">$50,000</span>
                        </div>
                        <div class="flex justify-between font-mono text-sm">
                            <span class="text-gray-500">HARDWARE</span>
                            <span class="text-signal font-bold">Ryzen 9 + 4090</span>
                        </div>
                    </div>
                </div>
                <button class="brutal-btn w-full bg-transparent text-white border-white mt-auto pointer-events-none"><span>INITIALIZE</span></button>
            </div>

            <!-- Tier B -->
            <div class="info-card dark p-6 flex flex-col h-full bg-[#111]" onclick="openJoinModal('B')">
                <div class="cursor-pointer">
                    <h3 class="font-heavy text-4xl mb-1 text-white">TIER B</h3>
                    <p class="font-mono text-xs text-gray-400 mb-6" data-i18n="tier_b_loc">Residential Areas</p>
                    
                    <div class="border-t border-white/20 py-4 mb-2">
                        <div class="flex justify-between font-mono text-sm mb-2">
                            <span class="text-gray-500">STAKE VALUE</span>
                            <span class="text-white font-bold">$5,000</span>
                        </div>
                        <div class="flex justify-between font-mono text-sm">
                            <span class="text-gray-500">HARDWARE</span>
                            <span class="text-signal font-bold">Ryzen 7 + 4070</span>
                        </div>
                    </div>
                </div>
                <button class="brutal-btn w-full bg-transparent text-white border-white mt-auto pointer-events-none"><span>INITIALIZE</span></button>
            </div>

            <!-- Tier C (OPEN) -->
            <div class="info-card dark p-6 flex flex-col h-full bg-[#111]" onclick="openJoinModal('C')">
                <div class="absolute top-0 right-0 bg-green-500 text-black font-bold px-2 py-1 font-mono text-xs">OPEN</div>
                <div class="cursor-pointer">
                    <h3 class="font-heavy text-4xl mb-1 text-white">TIER C</h3>
                    <p class="font-mono text-xs text-gray-400 mb-6" data-i18n="tier_c_loc">Long Tail / Personal</p>
                    
                    <div class="border-t border-white/20 py-4 mb-2">
                        <div class="flex justify-between font-mono text-sm mb-2">
                            <span class="text-gray-500">STAKE VALUE</span>
                            <span class="text-white font-bold">$1,000</span>
                        </div>
                        <div class="flex justify-between font-mono text-sm">
                            <span class="text-gray-500">HARDWARE</span>
                            <span class="text-green-400 font-bold">i5 + 3060</span>
                        </div>
                    </div>
                </div>
                <button class="brutal-btn w-full bg-transparent text-white border-white mt-auto pointer-events-none"><span>INITIALIZE</span></button>
            </div>

        </div>
    </section>

    <!-- ROADMAP -->
    <section id="roadmap" class="py-20 md:py-32 bg-steel border-t-2 border-black">
        <div class="max-w-[1920px] mx-auto px-4 md:px-8">
            <h2 class="section-title text-center mb-16 select-none" data-i18n="roadmap_title">
                EXECUTION PLAN
            </h2>

            <div class="max-w-4xl mx-auto border-l-2 border-black pl-8 md:pl-0 md:border-l-0 relative">
                <!-- Vertical Line for Desktop -->
                <div class="hidden md:block absolute left-1/2 top-0 bottom-0 w-[2px] bg-black -translate-x-1/2"></div>

                <!-- Step 1 -->
                <div class="relative mb-16 flex flex-col md:flex-row items-center justify-between w-full">
                    <div class="md:w-[45%] bg-white p-6 border-2 border-black shadow-[8px_8px_0_0_#000] text-right-md">
                        <div class="font-heavy text-2xl mb-1">GENESIS</div>
                        <div class="font-mono text-xs bg-signal text-white inline-block px-2 py-1 mb-2">FEB 2026</div>
                        <p class="font-mono text-sm text-gray-600" data-i18n="rm_1_d">Official Mainnet Launch. Deployment of initial 50 validator nodes.</p>
                    </div>
                    <div class="absolute left-[-37px] md:left-1/2 md:-translate-x-1/2 w-6 h-6 bg-signal border-2 border-black rounded-full z-10"></div>
                    <div class="md:w-[45%]"></div>
                </div>

                <!-- Step 2 -->
                <div class="relative mb-16 flex flex-col md:flex-row items-center justify-between w-full">
                    <div class="md:w-[45%]"></div>
                    <div class="absolute left-[-37px] md:left-1/2 md:-translate-x-1/2 w-6 h-6 bg-white border-2 border-black rounded-full z-10"></div>
                    <div class="md:w-[45%] bg-white p-6 border-2 border-black shadow-[8px_8px_0_0_#000]">
                        <div class="font-heavy text-2xl mb-1">SDK RELEASE</div>
                        <div class="font-mono text-xs bg-black text-white inline-block px-2 py-1 mb-2">AUG 2026</div>
                        <p class="font-mono text-sm text-gray-600" data-i18n="rm_2_d">Public release of Unity/Unreal SDKs. Opening Tier B node registration.</p>
                    </div>
                </div>

                <!-- Step 3 -->
                <div class="relative mb-16 flex flex-col md:flex-row items-center justify-between w-full">
                    <div class="md:w-[45%] bg-white p-6 border-2 border-black shadow-[8px_8px_0_0_#000] text-right-md">
                        <div class="font-heavy text-2xl mb-1">EXPANSION</div>
                        <div class="font-mono text-xs bg-black text-white inline-block px-2 py-1 mb-2">FEB 2027</div>
                        <p class="font-mono text-sm text-gray-600" data-i18n="rm_3_d">Target: 5,000 Active Nodes. Launching cross-chain bridge.</p>
                    </div>
                    <div class="absolute left-[-37px] md:left-1/2 md:-translate-x-1/2 w-6 h-6 bg-white border-2 border-black rounded-full z-10"></div>
                    <div class="md:w-[45%]"></div>
                </div>

            </div>
        </div>
    </section>

    <!-- FOOTER -->
    <footer class="bg-black text-steel border-t border-[#222] pt-20 pb-10 px-4 md:px-8">
        <div class="max-w-[1920px] mx-auto">
            <div class="grid grid-cols-1 md:grid-cols-4 gap-12 mb-20">
                <div class="col-span-1 md:col-span-2">
                    <h2 class="font-heavy text-5xl md:text-7xl mb-6">AIF.WTF<span class="text-signal text-lg align-top ml-2">DEPIN</span></h2>
                    <p class="font-mono text-sm text-gray-400 max-w-md" data-i18n="footer_desc">
                        Redefining the relationship between humans and space. Building the physical infrastructure for the spatial internet.
                    </p>
                </div>
                
                <div>
                    <h4 class="font-mono text-signal mb-6">LINKS</h4>
                    <ul class="font-mono text-sm space-y-2">
                        <li><a href="#" class="hover:text-white underline">Explorer</a></li>
                        <li><a href="#" class="hover:text-white underline">Whitepaper</a></li>
                        <li><a href="#" class="hover:text-white underline">Github</a></li>
                    </ul>
                </div>

                <div>
                    <h4 class="font-mono text-signal mb-6">LEGAL</h4>
                    <ul class="font-mono text-sm space-y-2">
                        <li><a href="#" class="hover:text-white">Privacy Policy</a></li>
                        <li><a href="#" class="hover:text-white">Terms of Service</a></li>
                    </ul>
                </div>
            </div>

            <div class="border-t border-[#333] pt-8 flex flex-col md:flex-row justify-between items-center font-mono text-xs text-gray-600">
                <div>© 2026 AIF FOUNDATION. ALL RIGHTS RESERVED.</div>
                <div class="mt-4 md:mt-0 flex gap-4">
                    POWERED BY SOLANA
                </div>
            </div>
        </div>
    </footer>

    <!-- JOIN MODAL (Updated with Payment Process) -->
    <div id="joinModal" class="fixed inset-0 z-[100] bg-black/90 hidden flex items-center justify-center p-4">
        <div class="bg-white border-2 border-black w-full max-w-3xl shadow-[20px_20px_0_0_#FF3300] relative flex flex-col max-h-[90vh] overflow-hidden" id="joinModalContent">
            
            <!-- Header -->
            <div class="p-6 border-b-2 border-black bg-steel flex justify-between items-center">
                <div>
                    <h3 class="font-heavy text-2xl text-black">INITIALIZE NODE <span id="modalTierBadge" class="bg-black text-white px-2 text-sm align-middle ml-2">TIER S</span></h3>
                </div>
                <button onclick="closeJoinModal()" class="w-8 h-8 border-2 border-black flex items-center justify-center hover:bg-black hover:text-white transition-colors">
                    <i class="fas fa-times"></i>
                </button>
            </div>

            <!-- Body -->
            <div class="p-8 overflow-y-auto space-y-8 bg-paper">
                
                <!-- Notice -->
                <div class="bg-yellow-100 border-2 border-yellow-500 p-4 font-mono text-xs">
                    <i class="fas fa-exclamation-triangle mr-2"></i>
                    <span data-i18n="modal_notice">Limited Availability. Stake AIF to Activate Node License.</span>
                </div>

                <!-- Config -->
                <div>
                    <div class="font-mono text-xs font-bold mb-4 uppercase">/// 01_CONFIGURATION</div>
                    <div class="grid grid-cols-1 gap-4">
                        <div class="p-4 border-2 border-signal bg-white transition-all h-full">
                            <div class="flex justify-between mb-2">
                                <i class="fas fa-server text-xl text-signal"></i>
                                <div class="w-4 h-4 border-2 border-black rounded-full bg-black"></div>
                            </div>
                            <div class="font-bold text-sm">HARDWARE REQUIREMENT</div>
                            <div class="text-xs text-gray-500 font-mono mt-1" id="modalHardwareSpec">Dual EPYC + H100</div>
                            <div class="font-mono text-xs mt-2 text-green-600 font-bold">BYO DEVICE ALLOWED</div>
                        </div>
                    </div>
                </div>

                <!-- Staking -->
                <div>
                    <div class="font-mono text-xs font-bold mb-4 uppercase">/// 02_STAKING_LOCK</div>
                    <div class="bg-black text-white p-6 border-2 border-black relative overflow-hidden">
                        <div class="relative z-10 flex flex-col md:flex-row justify-between items-center gap-4">
                            <div>
                                <div class="text-gray-400 text-xs mb-1">TIER PRICE (USD)</div>
                                <div class="font-mono text-3xl font-bold text-white" id="modalPriceUsd">$500,000</div>
                            </div>
                            <div class="hidden md:block text-2xl text-gray-600"><i class="fas fa-arrow-right"></i></div>
                            <div class="text-right">
                                <div class="text-gray-400 text-xs mb-1">AIF TO LOCK (@0.06)</div>
                                <div class="font-mono text-3xl font-bold text-signal" id="modalStakeAmount">8.33M</div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Payment Process -->
                <div>
                    <div class="font-mono text-xs font-bold mb-4 uppercase text-signal">/// 03_PAYMENT_PROCESS</div>
                    
                    <!-- Fiat -->
                    <div class="mb-4">
                        <div class="text-xs font-bold mb-2">OPTION A: FIAT (WISE/CARD)</div>
                        <div class="grid grid-cols-2 md:grid-cols-4 gap-2">
                            <a href="https://wise.com/pay/r/2Cd46UMrecZcXdQ" target="_blank" class="brutal-btn w-full bg-white text-black text-[10px] py-2 px-1 border-gray-400">USD</a>
                            <a href="https://wise.com/pay/r/50Ezgo0kXcMwckI" target="_blank" class="brutal-btn w-full bg-white text-black text-[10px] py-2 px-1 border-gray-400">HKD</a>
                            <a href="https://wise.com/pay/r/vYRES8taWtWJny4" target="_blank" class="brutal-btn w-full bg-white text-black text-[10px] py-2 px-1 border-gray-400">JPY</a>
                            <a href="https://wise.com/pay/r/2wp3XarRjI1CSIA" target="_blank" class="brutal-btn w-full bg-white text-black text-[10px] py-2 px-1 border-gray-400">EUR</a>
                        </div>
                    </div>

                    <!-- Crypto -->
                    <div class="mb-6">
                        <div class="text-xs font-bold mb-2">OPTION B: CRYPTO TRANSFER</div>
                        <div class="bg-concrete p-3 border border-black text-white text-xs font-mono break-all">
                            <div class="text-gray-500 mb-1">SOLANA (USDT/USDC):</div>
                            <div class="text-signal select-all">3QBgQiHC743ER9beX74bp8K7xrURQR2t5myfcG6tSTLv</div>
                        </div>
                        <div class="bg-concrete p-3 border border-black text-white text-xs font-mono break-all mt-2">
                            <div class="text-gray-500 mb-1">BSC (USDT):</div>
                            <div class="text-signal select-all">0xc059dc798ec9f31e765d9cccffd2c62b993857c9</div>
                        </div>
                    </div>

                    <!-- Verify -->
                    <div class="bg-steel p-4 border-2 border-black">
                        <div class="font-bold text-sm mb-2">FINAL STEP: VERIFICATION</div>
                        <p class="text-xs text-gray-600 mb-2">
                            Send your payment screenshot + wallet address to initiate node setup.
                        </p>
                        <a href="mailto:depin@aif.wtf" class="block w-full text-center font-bold underline hover:text-signal">depin@aif.wtf</a>
                    </div>
                </div>

            </div>

        </div>
    </div>

    <!-- TOAST -->
    <div id="toast" class="fixed bottom-8 right-8 bg-black text-white border-2 border-signal px-6 py-4 shadow-[10px_10px_0_0_#fff] transform translate-y-40 transition-transform duration-500 z-[200] flex items-center gap-4">
        <div class="text-signal text-2xl"><i class="fas fa-check-square"></i></div>
        <div>
            <h4 class="font-heavy text-lg uppercase">INITIALIZED</h4>
            <p class="font-mono text-xs text-gray-400">Please complete payment verification.</p>
        </div>
    </div>

    <script>
        // --- 1. Data & Localization ---
        const translations = {
            en: {
                nav_vision: "VISION", nav_tech: "TECHNOLOGY", nav_nodes: "NODES", nav_roadmap: "ROADMAP",
                hero_status: "/// SYSTEM STATUS: GRID ONLINE", hero_title1: "DROP CONTENT", hero_title2: "NOT HARDWARE", 
                hero_desc: "The world's first decentralized physical infrastructure network (DePIN) optimized for AI-native interactive content. We transform idle computing power into \"digital anchors\" for the spatial web.",
                hero_cta_primary: "INITIATE NODE ///", hero_cta_heatmap: "VIEW LIVE GRID",
                stat_nodes: "ACTIVE NODES: 1,248", stat_latency: "LATENCY: 18.4MS", stat_compute: "COMPUTE: 450 PFLOPS", trust_audit: "AUDIT: CERTIK",
                map_title: "GLOBAL GRID", map_desc: "Real-time visualization of Cloud-Fog-Edge data transmission. H3 Hexagonal Indexing Active.",
                prob_title: "THE LATENCY\nBOTTLENECK", sol_title: "DISTRIBUTED\nFOG COMPUTE",
                sol_p1: "H3 Hexagonal Indexing", sol_p2: "TEE Privacy Computing", sol_p3: "Dynamic Resource Allocation",
                tech_label: "INFRASTRUCTURE", tech_title: "THE TRINITY ARCHITECTURE",
                tech_cloud: "Content generation hub. Long-term storage.", tech_fog: "THE CORE. Distributed nodes handling real-time rendering < 20ms.", tech_edge: "Lightweight display hardware. Sensors.",
                node_title: "JOIN THE NETWORK", node_subtitle: "Stake AIF to become a node operator.",
                tier_s_loc: "Times Square / Shibuya", tier_a_loc: "Commercial Districts", tier_b_loc: "Residential Areas", tier_c_loc: "Long Tail / Personal",
                roadmap_title: "EXECUTION PLAN", rm_1_d: "Official Mainnet Launch. Deployment of initial 50 validator nodes.", rm_2_d: "Public release of Unity/Unreal SDKs. Opening Tier B node registration.", rm_3_d: "Target: 5,000 Active Nodes. Launching cross-chain bridge.",
                modal_notice: "Limited Availability. Stake AIF to Activate Node License.",
                
                // Disclaimer
                disc_title: "IMPORTANT DISCLAIMER",
                disc_p1: "You are about to enter the AIF.WTF Node Service Area.",
                disc_p2: "This service involves digital assets and infrastructure participation.",
                disc_confirm: "Please confirm:",
                disc_c1: "I am not a resident of Mainland China",
                disc_c2: "I am not a U.S. citizen or resident",
                disc_c3: "I am participating with my own offshore assets",
                disc_c4: "I acknowledge the risks of digital asset participation",
                disc_c5: "I voluntarily assume all risks",
                disc_agree: "I have read and agree to the \"User Agreement\" and \"Risk Disclosure Statement\".",
                disc_enter: "ENTER SITE",
            },
            zh: {
                nav_vision: "願景", nav_tech: "技術", nav_nodes: "節點", nav_roadmap: "路線圖",
                hero_status: "/// 系統狀態：網格在線", hero_title1: "投放內容", hero_title2: "而非硬件", 
                hero_desc: "全球首個專為 AI原生互動內容 優化的去中心化物理基礎設施網絡 (DePIN)。我們將閒置算力轉化為空間網絡的「數字錨點」。",
                hero_cta_primary: "啟動節點 ///", hero_cta_heatmap: "查看實時網格",
                stat_nodes: "活躍節點: 1,248", stat_latency: "延遲: 18.4MS", stat_compute: "算力: 450 PFLOPS", trust_audit: "審計: CERTIK",
                map_title: "全球網格", map_desc: "雲-霧-端數據傳輸實時可視化。",
                prob_title: "延遲瓶頸", sol_title: "分佈式\n霧計算",
                sol_p1: "H3 六邊形索引", sol_p2: "TEE 隱私計算", sol_p3: "動態資源分配",
                tech_label: "基礎設施", tech_title: "三位一體架構",
                tech_cloud: "內容生成中心。長期存儲。", tech_fog: "核心層。分佈式節點處理實時渲染 < 20ms。", tech_edge: "輕量化顯示硬件。傳感器。",
                node_title: "加入網絡", node_subtitle: "質押 AIF 成為節點運營商。",
                tier_s_loc: "時代廣場 / 澀谷", tier_a_loc: "商業區", tier_b_loc: "住宅區", tier_c_loc: "入門級 / 個人",
                roadmap_title: "執行計劃", rm_1_d: "主網正式啟動。部署首批50個驗證節點。", rm_2_d: "Unity/Unreal SDK 發佈。開放 Tier B 註冊。", rm_3_d: "目標：5,000 活躍節點。啟動跨鏈橋。",
                modal_notice: "名額有限。質押 AIF 以激活節點許可證。",

                // Disclaimer
                disc_title: "重要免責聲明",
                disc_p1: "您即將進入 AIF.WTF 節點服務區域。",
                disc_p2: "本服務涉及數字資產和基礎設施參與。",
                disc_confirm: "請確認：",
                disc_c1: "本人非中國大陸居民",
                disc_c2: "本人非美國公民或居民",
                disc_c3: "本人通過自有境外資產參與",
                disc_c4: "本人知悉數字資產參與風險",
                disc_c5: "本人自願承擔全部風險",
                disc_agree: "我已閱讀並同意《用戶協議》《風險提示書》",
                disc_enter: "進入網站",
            }
        };

        const tierData = {
            'S': { priceUsd: 500000, specs: "Dual EPYC + H100" },
            'A': { priceUsd: 50000, specs: "Ryzen 9 + RTX 4090" },
            'B': { priceUsd: 5000, specs: "Ryzen 7 + RTX 4070" },
            'C': { priceUsd: 1000, specs: "i5 + RTX 3060" }
        };

        let currentLang = 'en';
        let currentTier = 'S';

        // --- Basic Functions ---
        function toggleLanguage() {
            currentLang = currentLang === 'en' ? 'zh' : 'en';
            document.querySelectorAll('[data-i18n]').forEach(el => {
                const key = el.getAttribute('data-i18n');
                if(translations[currentLang][key]) el.innerText = translations[currentLang][key];
            });
            document.querySelector('.lang-text').innerText = currentLang === 'en' ? 'EN/中文' : '中/EN';
            if(!document.getElementById('joinModal').classList.contains('hidden')) updateCalc();
        }

        function toggleMenu() {
            document.getElementById('mobile-menu').classList.toggle('active');
        }

        // --- Disclaimer Logic ---
        function checkDisclaimer() {
            const checks = document.querySelectorAll('.disclaimer-check');
            const btn = document.getElementById('disclaimer-submit');
            let allChecked = true;
            checks.forEach(c => { if(!c.checked) allChecked = false; });
            
            if(allChecked) {
                btn.removeAttribute('disabled');
                btn.classList.remove('bg-gray-300', 'text-gray-500', 'cursor-not-allowed');
                btn.classList.add('bg-black', 'text-white', 'hover:bg-signal', 'hover:text-black');
            } else {
                btn.setAttribute('disabled', 'true');
                btn.classList.add('bg-gray-300', 'text-gray-500', 'cursor-not-allowed');
                btn.classList.remove('bg-black', 'text-white', 'hover:bg-signal', 'hover:text-black');
            }
        }

        function acceptDisclaimer() {
            const modal = document.getElementById('disclaimer-modal');
            const body = document.getElementById('body-content');
            gsap.to(modal, { opacity: 0, duration: 0.5, onComplete: () => {
                modal.style.display = 'none';
                body.classList.remove('overflow-hidden');
            }});
        }

        // --- Modal Logic ---
        function openJoinModal(tier) {
            currentTier = tier;
            document.getElementById('modalTierBadge').innerText = `TIER ${tier}`;
            updateCalc();
            document.getElementById('joinModal').classList.remove('hidden');
        }

        function closeJoinModal() {
            document.getElementById('joinModal').classList.add('hidden');
        }

        function updateCalc() {
            const data = tierData[currentTier];
            if (!data) return;

            const price = data.priceUsd;
            const aifAmount = price / 0.06;
            
            // Format numbers
            const fmtPrice = price.toLocaleString();
            let fmtAif;
            
            if(aifAmount >= 1000000) {
                fmtAif = (aifAmount / 1000000).toFixed(2) + "M";
            } else {
                fmtAif = (aifAmount / 1000).toFixed(1) + "k";
            }

            document.getElementById('modalPriceUsd').innerText = `$${fmtPrice}`;
            document.getElementById('modalStakeAmount').innerText = fmtAif;
            document.getElementById('modalHardwareSpec').innerText = data.specs;
        }

        // --- CANVAS ANIMATION (Reverted to Digital Grid Style) ---
        const canvas = document.getElementById('globalCanvas');
        const ctx = canvas.getContext('2d');
        let width, height;

        // Approx Relative Coords for Map Construction (Width:Height ~ 2:1)
        const cities = [
            { name: "TOKYO", x: 0.88, y: 0.35 }, 
            { name: "NEW YORK", x: 0.28, y: 0.32 }, 
            { name: "LONDON", x: 0.48, y: 0.26 }, 
            { name: "SHANGHAI", x: 0.82, y: 0.38 }, 
            { name: "HONG KONG", x: 0.81, y: 0.45 },
            { name: "LA", x: 0.15, y: 0.35 }, 
            { name: "SINGAPORE", x: 0.79, y: 0.55 },
            { name: "SYDNEY", x: 0.92, y: 0.8 },
            { name: "SAO PAULO", x: 0.32, y: 0.75 },
            { name: "CAPE TOWN", x: 0.53, y: 0.85 }
        ];

        let particles = [];

        function resizeCanvas() {
            const container = document.getElementById('heatmap-container');
            width = container.offsetWidth;
            height = container.offsetHeight;
            canvas.width = width;
            canvas.height = height;
        }

        class Particle {
            constructor() { this.reset(); }
            reset() {
                this.target = cities[Math.floor(Math.random() * cities.length)];
                this.start = cities[Math.floor(Math.random() * cities.length)];
                if(this.target === this.start) this.target = cities[Math.floor(Math.random() * cities.length)];

                this.sx = this.start.x * width;
                this.sy = this.start.y * height;
                this.ex = this.target.x * width;
                this.ey = this.target.y * height;
                this.progress = 0;
                this.speed = 0.003 + Math.random() * 0.005;
            }
            update() {
                this.progress += this.speed;
                if(this.progress >= 1) this.reset();
            }
            draw() {
                const t = this.progress;
                const x = this.sx + (this.ex - this.sx) * t;
                const y = this.sy + (this.ey - this.sy) * t;
                
                // Draw Square Particle (Brutalist Style)
                ctx.fillStyle = '#FF3300';
                ctx.fillRect(x-1, y-1, 3, 3); 
                
                // Draw Trail
                ctx.beginPath();
                ctx.moveTo(x, y);
                ctx.lineTo(x - (this.ex-this.sx)*0.08, y - (this.ey-this.sy)*0.08);
                ctx.strokeStyle = 'rgba(255, 51, 0, 0.4)';
                ctx.lineWidth = 1;
                ctx.stroke();
            }
        }

        function drawGrid() {
            ctx.strokeStyle = 'rgba(255, 255, 255, 0.05)';
            ctx.lineWidth = 1;
            
            const step = 40;
            // Verticals
            for(let x = 0; x < width; x += step) {
                ctx.beginPath();
                ctx.moveTo(x, 0);
                ctx.lineTo(x, height);
                ctx.stroke();
            }
            // Horizontals
            for(let y = 0; y < height; y += step) {
                ctx.beginPath();
                ctx.moveTo(0, y);
                ctx.lineTo(width, y);
                ctx.stroke();
            }
        }

        function drawMapPoints() {
            // Draw Cities
            ctx.font = "10px Space Mono";
            cities.forEach(c => {
                const cx = c.x * width;
                const cy = c.y * height;
                
                // Node Point
                ctx.fillStyle = '#000';
                ctx.fillRect(cx - 3, cy - 3, 6, 6);
                ctx.strokeStyle = '#FF3300';
                ctx.strokeRect(cx - 4, cy - 4, 8, 8);
                
                // Label
                ctx.fillStyle = '#FFF';
                ctx.fillText(c.name, cx + 8, cy + 3);

                // Connecting Lines (Faint)
                ctx.strokeStyle = 'rgba(255, 255, 255, 0.05)';
                ctx.beginPath();
                cities.forEach(c2 => {
                    if(c !== c2 && Math.random() > 0.85) { // Random connections
                         const cx2 = c2.x * width;
                         const cy2 = c2.y * height;
                         ctx.moveTo(cx, cy);
                         ctx.lineTo(cx2, cy2);
                         ctx.stroke();
                    }
                });
            });
        }

        function animate() {
            ctx.clearRect(0,0,width,height);
            
            // Re-draw background grid manually if needed or rely on CSS
            // drawGrid(); // CSS handles the static grid, canvas handles dynamic elements

            drawMapPoints();
            particles.forEach(p => { p.update(); p.draw(); });
            requestAnimationFrame(animate);
        }

        // --- FIDS BOARD LOGIC (Preserved) ---
        const maxRows = 6;
        
        function randomHex(length) {
            let result = '';
            const characters = 'ABCDEF0123456789';
            for (let i = 0; i < length; i++) {
                result += characters.charAt(Math.floor(Math.random() * characters.length));
            }
            return result;
        }

        function generateRow() {
            const tiers = ['TIER S', 'TIER A', 'TIER B', 'TIER C'];
            const statuses = ['ONLINE', 'SYNCING', 'MINTING'];
            const city = cities[Math.floor(Math.random() * cities.length)];
            
            return {
                id: `ND-${Math.floor(Math.random() * 9000) + 1000}`,
                addr: `0x${randomHex(4)}...${randomHex(4)}`,
                tier: tiers[Math.floor(Math.random() * tiers.length)],
                coords: `GRID-${Math.floor(Math.random()*99)}`, // Abstract coord
                uptime: `${Math.floor(Math.random() * 24)}H ${Math.floor(Math.random() * 60)}M`,
                status: statuses[Math.floor(Math.random() * statuses.length)]
            };
        }

        function initFids() {
            const tbody = document.getElementById('fids-body');
            for(let i=0; i<maxRows; i++) {
                const tr = document.createElement('tr');
                tr.className = 'fids-row';
                tr.id = `row-${i}`;
                tbody.appendChild(tr);
                updateRow(i, generateRow(), true);
            }
        }

        function updateRow(index, data, instant = false) {
            const tr = document.getElementById(`row-${index}`);
            if(!tr) return;
            
            const cellContent = (text, colorClass = '') => {
                return `<span class="flip-char ${colorClass}">${text}</span>`;
            };

            let statusClass = '';
            if(data.status === 'ONLINE') statusClass = 'status-active';
            if(data.status === 'SYNCING') statusClass = 'status-sync';
            if(data.status === 'OFFLINE') statusClass = 'status-offline';

            tr.innerHTML = `
                <td class="fids-cell text-signal font-bold">${cellContent(data.id)}</td>
                <td class="fids-cell text-gray-400">${cellContent(data.addr)}</td>
                <td class="fids-cell font-bold">${cellContent(data.tier)}</td>
                <td class="fids-cell text-gray-500">${cellContent(data.coords)}</td>
                <td class="fids-cell">${cellContent(data.uptime)}</td>
                <td class="fids-cell ${statusClass} font-bold animate-pulse">${cellContent(data.status)}</td>
            `;
        }

        function startFidsLoop() {
            initFids();
            setInterval(() => {
                const rowIndex = Math.floor(Math.random() * maxRows);
                updateRow(rowIndex, generateRow());
            }, 1200); 
        }

        // Tickers
        function startTickers() {
            const container = document.getElementById('liveTickerContainer');
            setInterval(() => {
                const acts = ["NODE_JOIN", "COMPUTE_VERIFIED", "TOKEN_STAKED", "ASSET_CACHED"];
                const el = document.createElement('div');
                el.className = "flex justify-between font-mono text-[10px] text-gray-400 border-l-2 border-signal pl-2 mb-2 animate-pulse";
                el.innerHTML = `<span>0x${Math.floor(Math.random()*9999)}...</span> <span class="text-white">${acts[Math.floor(Math.random()*acts.length)]}</span>`;
                container.prepend(el);
                if(container.children.length > 5) container.lastElementChild.remove();
            }, 1000);
        }

        // Init
        window.addEventListener('load', () => {
            gsap.to("#loader", { yPercent: -100, duration: 0.8, ease: "power4.inOut", delay: 0.5 });
            resizeCanvas();
            particles = Array(60).fill().map(() => new Particle());
            animate();
            startTickers();
            startFidsLoop(); 
        });
        window.addEventListener('resize', resizeCanvas);

        // GSAP Scroll
        gsap.registerPlugin(ScrollTrigger);
        gsap.utils.toArray('section').forEach(sec => {
            gsap.from(sec, {
                opacity: 0, y: 50, duration: 0.8,
                scrollTrigger: { trigger: sec, start: "top 85%" }
            });
        });

    </script>
</body>
</html>